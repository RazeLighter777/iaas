apiVersion: v1
kind: ConfigMap
metadata:
  name: frigate-configmap
  namespace: frigate
data:
  neolink.toml: |
    bind = "0.0.0.0"

    [[cameras]]
    name = "library"
    username = "${FRIGATE_CAMERA_USERNAME}"
    password = "${FRIGATE_CAMERA_PASSWORD}"
    uid = "${FRIGATE_LIBRARY_CAMERA_UID}"
    address = "${FRIGATE_LIBRARY_CAMERA_IP}"

    [[cameras]]
    name = "cat_room"
    username = "${FRIGATE_CAMERA_USERNAME}"
    password = "${FRIGATE_CAMERA_PASSWORD}"
    uid = "${FRIGATE_CAT_ROOM_CAMERA_UID}"
    address = "${FRIGATE_CAT_ROOM_CAMERA_IP}"
  config.yml: |
    mqtt:
      enabled: False

    go2rtc:
      streams:
        library:
          - rtsp://127.0.0.1:8554/library/mainStream
        library_sub:
          - rtsp://127.0.0.1:8554/library/subStream
        cat_room:
          - rtsp://127.0.0.1:8554/cat_room/mainStream
        cat_room_sub:
          - rtsp://127.0.0.1:8554/cat_room/subStream

    cameras:
      library:
        enabled: true
        ffmpeg:
          inputs:
            - path: rtsp://127.0.0.1:8554/library/subStream
              roles:
                - detect
            - path: rtsp://127.0.0.1:8554/library/mainStream
              roles:
                - record

      cat_room:
        enabled: true
        ffmpeg:
          inputs:
            - path: rtsp://127.0.0.1:8554/cat_room/subStream
              roles:
                - detect
            - path: rtsp://127.0.0.1:8554/cat_room/mainStream
              roles:
                - record
    record:
      enabled: true
      retain:
        days: 1
        mode: all