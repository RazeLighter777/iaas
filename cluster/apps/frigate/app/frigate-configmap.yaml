apiVersion: v1
kind: ConfigMap
metadata:
  name: frigate-configmap
  namespace: frigate
data:
  config.yml: |
    mqtt:
      enabled: False

    go2rtc:
      streams:
        library:
          - rtsp://${FRIGATE_CAMERA_USERNAME}:${FRIGATE_CAMERA_PASSWORD}@${FRIGATE_LIBRARY_CAMERA_IP}:554/h264Preview_01_main
        library_sub:
          - rtsp://${FRIGATE_CAMERA_USERNAME}:${FRIGATE_CAMERA_PASSWORD}@${FRIGATE_LIBRARY_CAMERA_IP}:554/h264Preview_01_sub
        cat_room:
          - rtsp://${FRIGATE_CAMERA_USERNAME}:${FRIGATE_CAMERA_PASSWORD}@${FRIGATE_CAT_ROOM_CAMERA_IP}:554/h264Preview_01_main
        cat_room_sub:
          - rtsp://${FRIGATE_CAMERA_USERNAME}:${FRIGATE_CAMERA_PASSWORD}@${FRIGATE_CAT_ROOM_CAMERA_IP}:554/h264Preview_01_sub

    cameras:
      library:
        enabled: true
        ffmpeg:
          inputs:
            - path: rtsp://127.0.0.1:8554/library_sub
              roles:
                - detect
            - path: rtsp://127.0.0.1:8554/library
              roles:
                - record
        onvif:
          host: ${FRIGATE_LIBRARY_CAMERA_IP}
          port: 8000
          user: ${FRIGATE_CAMERA_USERNAME}
          password: ${FRIGATE_CAMERA_PASSWORD}

      cat_room:
        enabled: true
        ffmpeg:
          inputs:
            - path: rtsp://127.0.0.1:8554/cat_room_sub
              roles:
                - detect
            - path: rtsp://127.0.0.1:8554/cat_room
              roles:
                - record
        onvif:
          host: ${FRIGATE_CAT_ROOM_CAMERA_IP}
          port: 8000
          user: ${FRIGATE_CAMERA_USERNAME}
          password: ${FRIGATE_CAMERA_PASSWORD}

    record:
      enabled: true
      retain:
        days: 1
        mode: all